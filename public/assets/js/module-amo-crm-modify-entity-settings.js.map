{"version":3,"sources":["src/module-amo-crm-modify-entity-settings.js"],"names":["idUrl","idForm","className","ModuleAmoCrmEntityEdit","$formObj","$","$checkBoxes","$dropDowns","$pipelineDropdown","$entityActionDropdown","$typeDropdown","$task_responsible_type","validateRules","initialize","window","checkbox","onChange","onChangeSettings","dropdown","onChangeDropdown","initializeForm","onChangeEntityAction","value","text","$selectedItem","parents","first","show","hide","type","parent","setVisibilityElements","onChangePipelineStatusId","id","undefined","find","attr","pipeLineId","statuses","JSON","parse","val","remove","each","i","item","options","name","selected","append","values","create_contact","create_lead","create_unsorted","entityActionVariants","globalTranslate","task_responsible_type","taskRespVariants","cbBeforeSendForm","settings","result","data","form","pipeLineStatuses","cbAfterSendForm","response","console","log","success","title","html","history","pushState","page","location","href","Form","url","origin","globalRootUrl","create_task","document","ready"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAMA,KAAK,GAAS,gBAApB;AACA,IAAMC,MAAM,GAAQ,qCAApB;AACA,IAAMC,SAAS,GAAK,wBAApB;AAEA;;AACA,IAAMC,sBAAsB,GAAG;AAC9BC,EAAAA,QAAQ,EAAMC,CAAC,CAAC,MAAIJ,MAAL,CADe;AAE9BK,EAAAA,WAAW,EAAKD,CAAC,CAAC,MAAIJ,MAAJ,GAAW,eAAZ,CAFa;AAG9BM,EAAAA,UAAU,EAAKF,CAAC,CAAC,MAAIJ,MAAJ,GAAW,eAAZ,CAHc;AAI9BO,EAAAA,iBAAiB,EAAOH,CAAC,CAAC,mBAAD,CAJK;AAK9BI,EAAAA,qBAAqB,EAAGJ,CAAC,CAAC,eAAD,CALK;AAM9BK,EAAAA,aAAa,EAAQL,CAAC,CAAC,OAAD,CANQ;AAO9BM,EAAAA,sBAAsB,EAAEN,CAAC,CAAC,wBAAD,CAPK;;AAQ9B;AACD;AACA;AACA;AACA;AACCO,EAAAA,aAAa,EAAE,EAbe;;AAiB9B;AACD;AACA;AACCC,EAAAA,UApB8B,wBAoBjB;AACZ;AACAC,IAAAA,MAAM,CAACZ,SAAD,CAAN,CAAkBI,WAAlB,CAA8BS,QAA9B,CAAuC;AACtCC,MAAAA,QAAQ,EAAEF,MAAM,CAACZ,SAAD,CAAN,CAAkBe;AADU,KAAvC;AAGAH,IAAAA,MAAM,CAACZ,SAAD,CAAN,CAAkBK,UAAlB,CAA6BW,QAA7B,CAAsC;AACrCF,MAAAA,QAAQ,EAAEF,MAAM,CAACZ,SAAD,CAAN,CAAkBiB;AADS,KAAtC;AAIAL,IAAAA,MAAM,CAACZ,SAAD,CAAN,CAAkBiB,gBAAlB;AACAL,IAAAA,MAAM,CAACZ,SAAD,CAAN,CAAkBkB,cAAlB;AACA,GA/B6B;AAiC9BC,EAAAA,oBAjC8B,gCAiCTC,KAjCS,EAiCFC,IAjCE,EAiCIC,aAjCJ,EAiCmB;AAEhDnB,IAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBoB,OAAlB,CAA0B,WAA1B,EAAuCC,KAAvC,GAA+CC,IAA/C;AACAtB,IAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBoB,OAAtB,CAA8B,WAA9B,EAA2CC,KAA3C,GAAmDC,IAAnD;;AAEA,QAAG,WAAWL,KAAd,EAAoB;AACnBjB,MAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBoB,OAArB,CAA6B,cAA7B,EAA6CC,KAA7C,GAAqDX,QAArD,CAA8D,eAA9D;AACAV,MAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBoB,OAAlB,CAA0B,cAA1B,EAA0CC,KAA1C,GAAkDX,QAAlD,CAA2D,eAA3D;AACAV,MAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBoB,OAAtB,CAA8B,cAA9B,EAA8CC,KAA9C,GAAsDX,QAAtD,CAA+D,eAA/D;AAEAV,MAAAA,CAAC,CAAC,0BAAD,CAAD,CAA8BoB,OAA9B,CAAsC,WAAtC,EAAmDC,KAAnD,GAA2DE,IAA3D;AACAvB,MAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBoB,OAAvB,CAA+B,WAA/B,EAA4CC,KAA5C,GAAoDE,IAApD;AAEAvB,MAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBoB,OAAlB,CAA0B,WAA1B,EAAuCC,KAAvC,GAA+CE,IAA/C;AACAvB,MAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBoB,OAAtB,CAA8B,WAA9B,EAA2CC,KAA3C,GAAmDE,IAAnD;AACA,KAVD,MAUM,IAAG,eAAeN,KAAlB,EAAwB;AAC7BjB,MAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBoB,OAArB,CAA6B,cAA7B,EAA6CC,KAA7C,GAAqDX,QAArD,CAA8D,eAA9D;AACAV,MAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBoB,OAAlB,CAA0B,cAA1B,EAA0CC,KAA1C,GAAkDX,QAAlD,CAA2D,eAA3D;AACAV,MAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBoB,OAAtB,CAA8B,cAA9B,EAA8CC,KAA9C,GAAsDX,QAAtD,CAA+D,aAA/D;AAEAV,MAAAA,CAAC,CAAC,0BAAD,CAAD,CAA8BoB,OAA9B,CAAsC,WAAtC,EAAmDC,KAAnD,GAA2DE,IAA3D;AACAvB,MAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBoB,OAAvB,CAA+B,WAA/B,EAA4CC,KAA5C,GAAoDC,IAApD;AACA,KAPK,MAOA,IAAG,cAAcL,KAAjB,EAAuB;AAC5BjB,MAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBoB,OAArB,CAA6B,cAA7B,EAA6CC,KAA7C,GAAqDX,QAArD,CAA8D,aAA9D;AACAV,MAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBoB,OAAlB,CAA0B,cAA1B,EAA0CC,KAA1C,GAAkDX,QAAlD,CAA2D,eAA3D;AACAV,MAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBoB,OAAtB,CAA8B,cAA9B,EAA8CC,KAA9C,GAAsDX,QAAtD,CAA+D,eAA/D;AAEAV,MAAAA,CAAC,CAAC,0BAAD,CAAD,CAA8BoB,OAA9B,CAAsC,WAAtC,EAAmDC,KAAnD,GAA2DE,IAA3D;AACAvB,MAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBoB,OAAvB,CAA+B,WAA/B,EAA4CC,KAA5C,GAAoDE,IAApD;AACA,KAPK,MAOA,IAAG,mBAAoBN,KAAvB,EAA6B;AAClCjB,MAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBoB,OAArB,CAA6B,cAA7B,EAA6CC,KAA7C,GAAqDX,QAArD,CAA8D,aAA9D;AACAV,MAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBoB,OAAlB,CAA0B,cAA1B,EAA0CC,KAA1C,GAAkDX,QAAlD,CAA2D,aAA3D;AACAV,MAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBoB,OAAtB,CAA8B,cAA9B,EAA8CC,KAA9C,GAAsDX,QAAtD,CAA+D,eAA/D;AAEAV,MAAAA,CAAC,CAAC,0BAAD,CAAD,CAA8BoB,OAA9B,CAAsC,WAAtC,EAAmDC,KAAnD,GAA2DC,IAA3D;AACAtB,MAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBoB,OAAvB,CAA+B,WAA/B,EAA4CC,KAA5C,GAAoDC,IAApD;AACA,KAPK,MAOA,IAAG,WAAWL,KAAd,EAAoB;AACzBjB,MAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBoB,OAArB,CAA6B,cAA7B,EAA6CC,KAA7C,GAAqDX,QAArD,CAA8D,eAA9D;AACAV,MAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBoB,OAAlB,CAA0B,cAA1B,EAA0CC,KAA1C,GAAkDX,QAAlD,CAA2D,aAA3D;AACAV,MAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBoB,OAAtB,CAA8B,cAA9B,EAA8CC,KAA9C,GAAsDX,QAAtD,CAA+D,eAA/D;AAEAV,MAAAA,CAAC,CAAC,0BAAD,CAAD,CAA8BoB,OAA9B,CAAsC,WAAtC,EAAmDC,KAAnD,GAA2DC,IAA3D;AACAtB,MAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBoB,OAAvB,CAA+B,WAA/B,EAA4CC,KAA5C,GAAoDC,IAApD;AACA;;AAED,QAAIE,IAAI,GAAGf,MAAM,CAACZ,SAAD,CAAN,CAAkBQ,aAAlB,CAAgCoB,MAAhC,GAAyCZ,QAAzC,CAAkD,WAAlD,CAAX;;AACA,QAAGW,IAAI,KAAK,iBAAT,IAA8BA,IAAI,KAAK,eAA1C,EAA0D;AACzDxB,MAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBoB,OAAlB,CAA0B,WAA1B,EAAuCC,KAAvC,GAA+CE,IAA/C;AACA;;AACDd,IAAAA,MAAM,CAACZ,SAAD,CAAN,CAAkB6B,qBAAlB;AACA,GAnF6B;AAoF9BC,EAAAA,wBApF8B,oCAoFLV,KApFK,EAoFEC,IApFF,EAoFQC,aApFR,EAoFuB,CAEpD,CAtF6B;AAuF9BL,EAAAA,gBAvF8B,4BAuFbG,KAvFa,EAuFNC,IAvFM,EAuFAC,aAvFA,EAuFe;AAC5C,QAAIS,EAAE,GAAG,EAAT;;AACA,QAAGT,aAAa,KAAKU,SAArB,EAA+B;AAC9BD,MAAAA,EAAE,GAAGT,aAAa,CAACM,MAAd,GAAuBA,MAAvB,GAAgCK,IAAhC,CAAqC,QAArC,EAA+CC,IAA/C,CAAoD,IAApD,CAAL;AACA;;AACD,QAAI,OAAOH,EAAP,IAAaA,EAAE,KAAKnB,MAAM,CAACZ,SAAD,CAAN,CAAkBM,iBAAlB,CAAoC4B,IAApC,CAAyC,IAAzC,CAAxB,EAAuE;AACtE,UAAIC,UAAU,GAAGvB,MAAM,CAACZ,SAAD,CAAN,CAAkBM,iBAAlB,CAAoCsB,MAApC,GAA6CZ,QAA7C,CAAsD,WAAtD,CAAjB;AACA,UAAIoB,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWnC,CAAC,CAAC,mBAAD,CAAD,CAAuBoC,GAAvB,EAAX,EAAyCJ,UAAzC,CAAf;AACAhC,MAAAA,CAAC,CAAC,0BAAD,CAAD,CAA8B8B,IAA9B,CAAmC,QAAnC,EAA6CO,MAA7C;AACArC,MAAAA,CAAC,CAACsC,IAAF,CAAOL,QAAP,EAAiB,UAAUM,CAAV,EAAaC,IAAb,EAAmB;AACnC,YAAIC,OAAO,GAAG;AACbxB,UAAAA,KAAK,EAAEuB,IAAI,CAACvB,KADC;AAEbC,UAAAA,IAAI,EAAGsB,IAAI,CAACE;AAFC,SAAd;;AAIA,YAAGF,IAAI,CAACG,QAAR,EAAiB;AAChBF,UAAAA,OAAO,CAACE,QAAR,GAAmB,UAAnB;AACA;;AACD3C,QAAAA,CAAC,CAAC,0BAAD,CAAD,CAA8B4C,MAA9B,CAAqC5C,CAAC,CAAC,UAAD,EAAayC,OAAb,CAAtC;AACA,OATD;AAUAzC,MAAAA,CAAC,CAAC,0BAAD,CAAD,CAA8ByB,MAA9B,GAAuCZ,QAAvC,CAAgD;AAC/CgC,QAAAA,MAAM,EAAEZ,QADuC;AAE/CtB,QAAAA,QAAQ,EAAEF,MAAM,CAACZ,SAAD,CAAN,CAAkB8B;AAFmB,OAAhD;AAIA;;AAED,QAAI,OAAOC,EAAP,IAAaA,EAAE,KAAKnB,MAAM,CAACZ,SAAD,CAAN,CAAkBQ,aAAlB,CAAgC0B,IAAhC,CAAqC,IAArC,CAAxB,EAAmE;AAClE,UAAIe,cAAc,GAAI9C,CAAC,CAAC,iBAAD,CAAD,CAAqBoB,OAArB,CAA6B,cAA7B,EAA6CC,KAA7C,GAAqDX,QAArD,CAA8D,YAA9D,CAAtB;AACA,UAAIqC,WAAW,GAAI/C,CAAC,CAAC,cAAD,CAAD,CAAkBoB,OAAlB,CAA0B,cAA1B,EAA0CC,KAA1C,GAAkDX,QAAlD,CAA2D,YAA3D,CAAnB;AACA,UAAIsC,eAAe,GAAGhD,CAAC,CAAC,kBAAD,CAAD,CAAsBoB,OAAtB,CAA8B,cAA9B,EAA8CC,KAA9C,GAAsDX,QAAtD,CAA+D,YAA/D,CAAtB;AAEA,UAAIc,IAAI,GAAGf,MAAM,CAACZ,SAAD,CAAN,CAAkBQ,aAAlB,CAAgCoB,MAAhC,GAAyCZ,QAAzC,CAAkD,WAAlD,CAAX;AACA,UAAIoC,oBAAoB,GAAG,EAA3B;;AACA,UAAGzB,IAAI,KAAK,kBAAT,IAA+BA,IAAI,KAAK,iBAA3C,EAA6D;AAC5DyB,QAAAA,oBAAoB,GAAG,CACtB;AAACP,UAAAA,IAAI,EAAEQ,eAAe,CAAC,qBAAD,CAAtB;AAAqDjC,UAAAA,KAAK,EAAE,MAA5D;AAAoE0B,UAAAA,QAAQ,EAAGG,cAAc,KAAG,KAAjB,IAA0BC,WAAW,KAAG,KAAxC,IAAiDC,eAAe,KAAG;AAAlJ,SADsB,EAEtB;AAACN,UAAAA,IAAI,EAAEQ,eAAe,CAAC,yBAAD,CAAtB;AAAuDjC,UAAAA,KAAK,EAAE,UAA9D;AAA0E0B,UAAAA,QAAQ,EAAGK,eAAe,KAAG;AAAvG,SAFsB,EAGtB;AAACN,UAAAA,IAAI,EAAEQ,eAAe,CAAC,wBAAD,CAAtB;AAAuDjC,UAAAA,KAAK,EAAE,SAA9D;AAAyE0B,UAAAA,QAAQ,EAAGG,cAAc,KAAG,IAAjB,IAAyBC,WAAW,KAAG,KAAvC,IAAgDC,eAAe,KAAG;AAAtJ,SAHsB,EAItB;AAACN,UAAAA,IAAI,EAAEQ,eAAe,CAAC,6BAAD,CAAtB;AAAwDjC,UAAAA,KAAK,EAAE,cAA/D;AAA+E0B,UAAAA,QAAQ,EAAGG,cAAc,KAAG,IAAjB,IAAyBC,WAAW,KAAG,IAAvC,IAA+CC,eAAe,KAAG;AAA3J,SAJsB,CAAvB;AAMA,OAPD,MAOM,IAAGxB,IAAI,KAAK,gBAAT,IAA6BA,IAAI,KAAK,eAAtC,IAAyDA,IAAI,KAAK,qBAAlE,IAA2FA,IAAI,KAAK,gBAAvG,EAAwH;AAC7HyB,QAAAA,oBAAoB,GAAG,CACtB;AAACP,UAAAA,IAAI,EAAEQ,eAAe,CAAC,qBAAD,CAAtB;AAAkDjC,UAAAA,KAAK,EAAE,MAAzD;AAAiE0B,UAAAA,QAAQ,EAAGG,cAAc,KAAG,KAAjB,IAA0BC,WAAW,KAAG,KAAxC,IAAiDC,eAAe,KAAG;AAA/I,SADsB,EAEtB;AAACN,UAAAA,IAAI,EAAEQ,eAAe,CAAC,qBAAD,CAAtB;AAAkDjC,UAAAA,KAAK,EAAE,MAAzD;AAAiE0B,UAAAA,QAAQ,EAAGG,cAAc,KAAG,KAAjB,IAA0BC,WAAW,KAAG,IAAxC,IAAgDC,eAAe,KAAG;AAA9I,SAFsB,CAAvB;AAIA,OALK,MAKA,IAAGxB,IAAI,KAAK,kBAAZ,EAA+B;AACpCyB,QAAAA,oBAAoB,GAAG,CACtB;AAACP,UAAAA,IAAI,EAAEQ,eAAe,CAAC,qBAAD,CAAtB;AAAkDjC,UAAAA,KAAK,EAAE,MAAzD;AAAiE0B,UAAAA,QAAQ,EAAGG,cAAc,KAAG,KAAjB,IAA0BC,WAAW,KAAG,KAAxC,IAAiDC,eAAe,KAAG;AAA/I,SADsB,EAEtB;AAACN,UAAAA,IAAI,EAAEQ,eAAe,CAAC,wBAAD,CAAtB;AAAoDjC,UAAAA,KAAK,EAAE,SAA3D;AAAsE0B,UAAAA,QAAQ,EAAGG,cAAc,KAAG,IAAjB,IAAyBC,WAAW,KAAG,KAAvC,IAAgDC,eAAe,KAAG;AAAnJ,SAFsB,EAGtB;AAACN,UAAAA,IAAI,EAAEQ,eAAe,CAAC,6BAAD,CAAtB;AAAwDjC,UAAAA,KAAK,EAAE,cAA/D;AAA+E0B,UAAAA,QAAQ,EAAGG,cAAc,KAAG,IAAjB,IAAyBC,WAAW,KAAG,IAAvC,IAA+CC,eAAe,KAAG;AAA3J,SAHsB,CAAvB;AAKA;;AACDvC,MAAAA,MAAM,CAACZ,SAAD,CAAN,CAAkBO,qBAAlB,CAAwC0B,IAAxC,CAA6C,QAA7C,EAAuDO,MAAvD;AACArC,MAAAA,CAAC,CAACsC,IAAF,CAAOW,oBAAP,EAA6B,UAAUV,CAAV,EAAaC,IAAb,EAAmB;AAC/C,YAAIC,OAAO,GAAG;AACbxB,UAAAA,KAAK,EAAEuB,IAAI,CAACvB,KADC;AAEbC,UAAAA,IAAI,EAAGsB,IAAI,CAACE;AAFC,SAAd;;AAIA,YAAGF,IAAI,CAACG,QAAR,EAAiB;AAChBF,UAAAA,OAAO,CAACE,QAAR,GAAmB,UAAnB;AACA;;AACDlC,QAAAA,MAAM,CAACZ,SAAD,CAAN,CAAkBO,qBAAlB,CAAwCwC,MAAxC,CAA+C5C,CAAC,CAAC,UAAD,EAAayC,OAAb,CAAhD;AACA,OATD;AAUAhC,MAAAA,MAAM,CAACZ,SAAD,CAAN,CAAkBO,qBAAlB,CAAwCqB,MAAxC,GAAiDZ,QAAjD,CAA0D;AACzDgC,QAAAA,MAAM,EAAEI,oBADiD;AAEzDtC,QAAAA,QAAQ,EAAEF,MAAM,CAACZ,SAAD,CAAN,CAAkBmB;AAF6B,OAA1D;AAKA,UAAImC,qBAAqB,GAAG1C,MAAM,CAACZ,SAAD,CAAN,CAAkBS,sBAAlB,CAAyCmB,MAAzC,GAAkDZ,QAAlD,CAA2D,WAA3D,CAA5B;AACA,UAAIuC,gBAAgB,GAAG,EAAvB;;AACA,UAAG5B,IAAI,KAAK,qBAAT,IAAkCA,IAAI,KAAK,gBAA9C,EAAgE;AAC/D4B,QAAAA,gBAAgB,GAAG,CAClB;AAACV,UAAAA,IAAI,EAAEQ,eAAe,CAAC,gCAAD,CAAtB;AAA0DjC,UAAAA,KAAK,EAAE,EAAjE;AAAqE0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAAzG,SADkB,EAElB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,+CAAD,CAAtB;AAAyEjC,UAAAA,KAAK,EAAE,iBAAhF;AAAmG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAAvI,SAFkB,EAGlB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,8CAAD,CAAtB;AAAwEjC,UAAAA,KAAK,EAAE,gBAA/E;AAAiG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAArI,SAHkB,EAIlB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,iDAAD,CAAtB;AAA2EjC,UAAAA,KAAK,EAAE,mBAAlF;AAAuG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAA3I,SAJkB,EAKlB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,+CAAD,CAAtB;AAA0EjC,UAAAA,KAAK,EAAE,iBAAjF;AAAoG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAAxI,SALkB,CAAnB;AAQA,OATD,MASM,IAAI3B,IAAI,KAAK,kBAAb,EAAgC;AACrC4B,QAAAA,gBAAgB,GAAG,CAClB;AAACV,UAAAA,IAAI,EAAEQ,eAAe,CAAC,gCAAD,CAAtB;AAA0DjC,UAAAA,KAAK,EAAE,EAAjE;AAAqE0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAAzG,SADkB,EAElB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,+CAAD,CAAtB;AAA0EjC,UAAAA,KAAK,EAAE,iBAAjF;AAAoG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAAxI,SAFkB,EAGlB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,+CAAD,CAAtB;AAAyEjC,UAAAA,KAAK,EAAE,iBAAhF;AAAmG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAAvI,SAHkB,EAIlB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,8CAAD,CAAtB;AAAwEjC,UAAAA,KAAK,EAAE,gBAA/E;AAAiG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAArI,SAJkB,CAAnB;AAMA,OAPK,MAOA,IAAI3B,IAAI,KAAK,eAAb,EAA6B;AAClC4B,QAAAA,gBAAgB,GAAG,CAClB;AAACV,UAAAA,IAAI,EAAEQ,eAAe,CAAC,gCAAD,CAAtB;AAA0DjC,UAAAA,KAAK,EAAE,EAAjE;AAAqE0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAAzG,SADkB,EAElB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,+CAAD,CAAtB;AAA0EjC,UAAAA,KAAK,EAAE,iBAAjF;AAAoG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAAxI,SAFkB,EAGlB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,iDAAD,CAAtB;AAA2EjC,UAAAA,KAAK,EAAE,mBAAlF;AAAuG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAA3I,SAHkB,EAIlB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,+CAAD,CAAtB;AAAyEjC,UAAAA,KAAK,EAAE,iBAAhF;AAAmG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAAvI,SAJkB,EAKlB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,8CAAD,CAAtB;AAAwEjC,UAAAA,KAAK,EAAE,gBAA/E;AAAiG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAArI,SALkB,CAAnB;AAOA,OARK,MAQA,IAAI3B,IAAI,KAAK,kBAAb,EAAgC;AACrC4B,QAAAA,gBAAgB,GAAG,CAClB;AAACV,UAAAA,IAAI,EAAEQ,eAAe,CAAC,gCAAD,CAAtB;AAA0DjC,UAAAA,KAAK,EAAE,EAAjE;AAAqE0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAAzG,SADkB,EAElB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,+CAAD,CAAtB;AAA0EjC,UAAAA,KAAK,EAAE,iBAAjF;AAAoG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAAxI,SAFkB,EAGlB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,+CAAD,CAAtB;AAAyEjC,UAAAA,KAAK,EAAE,iBAAhF;AAAmG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAAvI,SAHkB,EAIlB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,8CAAD,CAAtB;AAAwEjC,UAAAA,KAAK,EAAE,gBAA/E;AAAiG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAArI,SAJkB,CAAnB;AAMA,OAPK,MAOA,IAAI3B,IAAI,KAAK,iBAAb,EAA+B;AACpC4B,QAAAA,gBAAgB,GAAG,CAClB;AAACV,UAAAA,IAAI,EAAEQ,eAAe,CAAC,gCAAD,CAAtB;AAA0DjC,UAAAA,KAAK,EAAE,EAAjE;AAAqE0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAAzG,SADkB,EAElB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,+CAAD,CAAtB;AAA0EjC,UAAAA,KAAK,EAAE,iBAAjF;AAAoG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAAxI,SAFkB,EAGlB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,+CAAD,CAAtB;AAAyEjC,UAAAA,KAAK,EAAE,iBAAhF;AAAmG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAAvI,SAHkB,EAIlB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,8CAAD,CAAtB;AAAwEjC,UAAAA,KAAK,EAAE,gBAA/E;AAAiG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAArI,SAJkB,CAAnB;AAMA,OAPK,MAOA,IAAI3B,IAAI,KAAK,gBAAb,EAA8B;AACnC4B,QAAAA,gBAAgB,GAAG,CAClB;AAACV,UAAAA,IAAI,EAAEQ,eAAe,CAAC,gCAAD,CAAtB;AAA0DjC,UAAAA,KAAK,EAAE,EAAjE;AAAqE0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAAzG,SADkB,EAElB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,+CAAD,CAAtB;AAAyEjC,UAAAA,KAAK,EAAE,iBAAhF;AAAmG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAAvI,SAFkB,EAGlB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,8CAAD,CAAtB;AAAwEjC,UAAAA,KAAK,EAAE,gBAA/E;AAAiG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAArI,SAHkB,EAIlB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,iDAAD,CAAtB;AAA2EjC,UAAAA,KAAK,EAAE,mBAAlF;AAAuG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAA3I,SAJkB,EAKlB;AAACT,UAAAA,IAAI,EAAEQ,eAAe,CAAC,+CAAD,CAAtB;AAA0EjC,UAAAA,KAAK,EAAE,iBAAjF;AAAoG0B,UAAAA,QAAQ,EAAEQ,qBAAqB,KAAK;AAAxI,SALkB,CAAnB;AAOA;;AACD1C,MAAAA,MAAM,CAACZ,SAAD,CAAN,CAAkBS,sBAAlB,CAAyCwB,IAAzC,CAA8C,QAA9C,EAAwDO,MAAxD;AACArC,MAAAA,CAAC,CAACsC,IAAF,CAAOc,gBAAP,EAAyB,UAAUb,CAAV,EAAaC,IAAb,EAAmB;AAC3C,YAAIC,OAAO,GAAG;AACbxB,UAAAA,KAAK,EAAEuB,IAAI,CAACvB,KADC;AAEbC,UAAAA,IAAI,EAAGsB,IAAI,CAACE;AAFC,SAAd;;AAIA,YAAGF,IAAI,CAACG,QAAR,EAAiB;AAChBF,UAAAA,OAAO,CAACE,QAAR,GAAmB,UAAnB;AACA;;AACDlC,QAAAA,MAAM,CAACZ,SAAD,CAAN,CAAkBS,sBAAlB,CAAyCsC,MAAzC,CAAgD5C,CAAC,CAAC,UAAD,EAAayC,OAAb,CAAjD;AACA,OATD;AAUAhC,MAAAA,MAAM,CAACZ,SAAD,CAAN,CAAkBS,sBAAlB,CAAyCmB,MAAzC,GAAkDZ,QAAlD,CAA2D;AAC1DgC,QAAAA,MAAM,EAAEO,gBADkD;AAE1DzC,QAAAA,QAAQ,EAAEF,MAAM,CAACZ,SAAD,CAAN,CAAkBmB;AAF8B,OAA3D;AAIA;;AACDP,IAAAA,MAAM,CAACZ,SAAD,CAAN,CAAkB6B,qBAAlB;AACA,GA5N6B;;AA8N9B;AACD;AACA;AACCd,EAAAA,gBAjO8B,8BAiOZ;AACjBH,IAAAA,MAAM,CAACZ,SAAD,CAAN,CAAkB6B,qBAAlB;AACA,GAnO6B;;AAqO9B;AACD;AACA;AACA;AACA;AACC2B,EAAAA,gBA1O8B,4BA0ObC,QA1Oa,EA0OH;AAC1B,QAAMC,MAAM,GAAGD,QAAf;AACAC,IAAAA,MAAM,CAACC,IAAP,GAAc/C,MAAM,CAACZ,SAAD,CAAN,CAAkBE,QAAlB,CAA2B0D,IAA3B,CAAgC,YAAhC,CAAd;AACA,WAAOF,MAAM,CAACC,IAAP,CAAYE,gBAAnB;AACA,WAAOH,MAAP;AACA,GA/O6B;;AAgP9B;AACD;AACA;AACCI,EAAAA,eAnP8B,2BAmPdC,QAnPc,EAmPJ;AACzBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AACA,QAAGA,QAAQ,CAACG,OAAT,KAAqB,IAArB,IAA6B/D,CAAC,CAAC,KAAD,CAAD,CAASoC,GAAT,OAAmB,EAAnD,EAAsD;AACrDpC,MAAAA,CAAC,CAAC,KAAD,CAAD,CAASoC,GAAT,CAAawB,QAAQ,CAAChC,EAAtB;AACA,UAAIoC,KAAK,GAAGhE,CAAC,CAAC,YAAD,CAAD,CAAgBiE,IAAhB,EAAZ;AACAxD,MAAAA,MAAM,CAACyD,OAAP,CAAeC,SAAf,CAAyB;AAACC,QAAAA,IAAI,EAAEJ;AAAP,OAAzB,EAAwCA,KAAxC,YAAkDvD,MAAM,CAAC4D,QAAP,CAAgBC,IAAlE,SAAyEV,QAAQ,CAAChC,EAAlF;AACA;AACD,GA1P6B;;AA4P9B;AACD;AACA;AACCb,EAAAA,cA/P8B,4BA+Pb;AAChBwD,IAAAA,IAAI,CAACxE,QAAL,GAAgBU,MAAM,CAACZ,SAAD,CAAN,CAAkBE,QAAlC;AACAwE,IAAAA,IAAI,CAACC,GAAL,aAAc/D,MAAM,CAAC4D,QAAP,CAAgBI,MAA9B,SAAuCC,aAAvC,SAAuD/E,KAAvD;AACA4E,IAAAA,IAAI,CAAChE,aAAL,GAAqBE,MAAM,CAACZ,SAAD,CAAN,CAAkBU,aAAvC;AACAgE,IAAAA,IAAI,CAAClB,gBAAL,GAAwB5C,MAAM,CAACZ,SAAD,CAAN,CAAkBwD,gBAA1C;AACAkB,IAAAA,IAAI,CAACZ,eAAL,GAAuBlD,MAAM,CAACZ,SAAD,CAAN,CAAkB8D,eAAzC;AACAY,IAAAA,IAAI,CAAC/D,UAAL;AACA,GAtQ6B;AAwQ9BkB,EAAAA,qBAxQ8B,mCAwQP;AACtB,QAAIoB,cAAc,GAAI9C,CAAC,CAAC,iBAAD,CAAD,CAAqBoB,OAArB,CAA6B,cAA7B,EAA6CV,QAA7C,CAAsD,YAAtD,CAAtB;AACA,QAAIsC,eAAe,GAAGhD,CAAC,CAAC,kBAAD,CAAD,CAAsBoB,OAAtB,CAA8B,cAA9B,EAA8CC,KAA9C,GAAsDX,QAAtD,CAA+D,YAA/D,CAAtB;;AACA,QAAGoC,cAAc,IAAIE,eAArB,EAAqC;AACpChD,MAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BoB,OAA5B,CAAoC,WAApC,EAAiDC,KAAjD,GAAyDC,IAAzD;AACA,KAFD,MAEK;AACJtB,MAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BoB,OAA5B,CAAoC,WAApC,EAAiDC,KAAjD,GAAyDE,IAAzD;AACA;;AACD,QAAIwB,WAAW,GAAI/C,CAAC,CAAC,cAAD,CAAD,CAAkBoB,OAAlB,CAA0B,cAA1B,EAA0CV,QAA1C,CAAmD,YAAnD,CAAnB;;AACA,QAAGqC,WAAW,IAAIC,eAAlB,EAAkC;AACjChD,MAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBoB,OAAzB,CAAiC,WAAjC,EAA8CC,KAA9C,GAAsDC,IAAtD;AACA,KAFD,MAEK;AACJtB,MAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBoB,OAAzB,CAAiC,WAAjC,EAA8CC,KAA9C,GAAsDE,IAAtD;AACA;;AACD,QAAIoD,WAAW,GAAI3E,CAAC,CAAC,cAAD,CAAD,CAAkBoB,OAAlB,CAA0B,cAA1B,EAA0CV,QAA1C,CAAmD,YAAnD,CAAnB;;AACA,QAAGiE,WAAH,EAAe;AACd3E,MAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBoB,OAAzB,CAAiC,WAAjC,EAA8CC,KAA9C,GAAsDC,IAAtD;AACAtB,MAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBoB,OAApB,CAA4B,WAA5B,EAAyCC,KAAzC,GAAiDC,IAAjD;AACAb,MAAAA,MAAM,CAACZ,SAAD,CAAN,CAAkBS,sBAAlB,CAAyCc,OAAzC,CAAiD,WAAjD,EAA8DC,KAA9D,GAAsEC,IAAtE;AACA,KAJD,MAIK;AACJtB,MAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBoB,OAAzB,CAAiC,WAAjC,EAA8CC,KAA9C,GAAsDE,IAAtD;AACAvB,MAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBoB,OAApB,CAA4B,WAA5B,EAAyCC,KAAzC,GAAiDE,IAAjD;AACAd,MAAAA,MAAM,CAACZ,SAAD,CAAN,CAAkBS,sBAAlB,CAAyCc,OAAzC,CAAiD,WAAjD,EAA8DC,KAA9D,GAAsEE,IAAtE;AACA;AACD;AAhS6B,CAA/B;AAmSAvB,CAAC,CAAC4E,QAAD,CAAD,CAAYC,KAAZ,CAAkB,YAAM;AACvBpE,EAAAA,MAAM,CAACZ,SAAD,CAAN,CAAkBW,UAAlB;AACA,CAFD","sourcesContent":["/*\n * Copyright (C) MIKO LLC - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Nikolay Beketov, 11 2018\n */\n\nconst idUrl     \t = 'module-amo-crm';\nconst idForm    \t = 'module-amo-crm-entity-settings-form';\nconst className \t = 'ModuleAmoCrmEntityEdit';\n\n/* global $, globalRootUrl, globalTranslate, Form, Config */\nconst ModuleAmoCrmEntityEdit = {\n\t$formObj: \t\t\t\t$('#'+idForm),\n\t$checkBoxes: \t\t\t$('#'+idForm+' .ui.checkbox'),\n\t$dropDowns: \t\t\t$('#'+idForm+' .ui.dropdown'),\n\t$pipelineDropdown:      $('#lead_pipeline_id'),\n\t$entityActionDropdown:  $('#entityAction'),\n\t$typeDropdown:      \t$('#type'),\n\t$task_responsible_type:\t$('#task_responsible_type'),\n\t/**\n\t/**\n\t * Field validation rules\n\t * https://semantic-ui.com/behaviors/form.html\n\t */\n\tvalidateRules: {\n\n\t},\n\n\t/**\n\t * On page load we init some Semantic UI library\n\t */\n\tinitialize() {\n\t\t// инициализируем чекбоксы и выподающие менюшки\n\t\twindow[className].$checkBoxes.checkbox({\n\t\t\tonChange: window[className].onChangeSettings\n\t\t});\n\t\twindow[className].$dropDowns.dropdown({\n\t\t\tonChange: window[className].onChangeDropdown\n\t\t});\n\n\t\twindow[className].onChangeDropdown();\n\t\twindow[className].initializeForm();\n\t},\n\n\tonChangeEntityAction(value, text, $selectedItem) {\n\n\t\t$(\"#responsible\").parents('div.field').first().show();\n\t\t$(\"#def_responsible\").parents('div.field').first().show();\n\n\t\tif('none' === value){\n\t\t\t$('#create_contact').parents('div.checkbox').first().checkbox('set unchecked');\n\t\t\t$('#create_lead').parents('div.checkbox').first().checkbox('set unchecked');\n\t\t\t$('#create_unsorted').parents('div.checkbox').first().checkbox('set unchecked');\n\n\t\t\t$(\"#lead_pipeline_status_id\").parents('div.field').first().hide();\n\t\t\t$(\"#lead_pipeline_id\").parents('div.field').first().hide();\n\n\t\t\t$(\"#responsible\").parents('div.field').first().hide();\n\t\t\t$(\"#def_responsible\").parents('div.field').first().hide();\n\t\t}else if('unsorted' === value){\n\t\t\t$('#create_contact').parents('div.checkbox').first().checkbox('set unchecked');\n\t\t\t$('#create_lead').parents('div.checkbox').first().checkbox('set unchecked');\n\t\t\t$('#create_unsorted').parents('div.checkbox').first().checkbox('set checked');\n\n\t\t\t$(\"#lead_pipeline_status_id\").parents('div.field').first().hide();\n\t\t\t$(\"#lead_pipeline_id\").parents('div.field').first().show();\n\t\t}else if('contact' === value){\n\t\t\t$('#create_contact').parents('div.checkbox').first().checkbox('set checked');\n\t\t\t$('#create_lead').parents('div.checkbox').first().checkbox('set unchecked');\n\t\t\t$('#create_unsorted').parents('div.checkbox').first().checkbox('set unchecked');\n\n\t\t\t$(\"#lead_pipeline_status_id\").parents('div.field').first().hide();\n\t\t\t$(\"#lead_pipeline_id\").parents('div.field').first().hide();\n\t\t}else if('contact_lead'  === value){\n\t\t\t$('#create_contact').parents('div.checkbox').first().checkbox('set checked');\n\t\t\t$('#create_lead').parents('div.checkbox').first().checkbox('set checked');\n\t\t\t$('#create_unsorted').parents('div.checkbox').first().checkbox('set unchecked');\n\n\t\t\t$(\"#lead_pipeline_status_id\").parents('div.field').first().show();\n\t\t\t$(\"#lead_pipeline_id\").parents('div.field').first().show();\n\t\t}else if('lead' === value){\n\t\t\t$('#create_contact').parents('div.checkbox').first().checkbox('set unchecked');\n\t\t\t$('#create_lead').parents('div.checkbox').first().checkbox('set checked');\n\t\t\t$('#create_unsorted').parents('div.checkbox').first().checkbox('set unchecked');\n\n\t\t\t$(\"#lead_pipeline_status_id\").parents('div.field').first().show();\n\t\t\t$(\"#lead_pipeline_id\").parents('div.field').first().show();\n\t\t}\n\n\t\tlet type = window[className].$typeDropdown.parent().dropdown('get value');\n\t\tif(type === 'MISSING_UNKNOWN' || type === 'MISSING_KNOWN'){\n\t\t\t$(\"#responsible\").parents('div.field').first().hide();\n\t\t}\n\t\twindow[className].setVisibilityElements();\n\t},\n\tonChangePipelineStatusId(value, text, $selectedItem) {\n\n\t},\n\tonChangeDropdown(value, text, $selectedItem) {\n\t\tlet id = '';\n\t\tif($selectedItem !== undefined){\n\t\t\tid = $selectedItem.parent().parent().find('select').attr('id');\n\t\t}\n\t\tif( '' === id || id === window[className].$pipelineDropdown.attr('id')){\n\t\t\tlet pipeLineId = window[className].$pipelineDropdown.parent().dropdown('get value');\n\t\t\tlet statuses = JSON.parse($('#pipeLineStatuses').val())[pipeLineId];\n\t\t\t$('#lead_pipeline_status_id').find('option').remove();\n\t\t\t$.each(statuses, function (i, item) {\n\t\t\t\tlet options = {\n\t\t\t\t\tvalue: item.value,\n\t\t\t\t\ttext : item.name\n\t\t\t\t};\n\t\t\t\tif(item.selected){\n\t\t\t\t\toptions.selected = 'selected';\n\t\t\t\t}\n\t\t\t\t$('#lead_pipeline_status_id').append($('<option>', options));\n\t\t\t});\n\t\t\t$('#lead_pipeline_status_id').parent().dropdown({\n\t\t\t\tvalues: statuses,\n\t\t\t\tonChange: window[className].onChangePipelineStatusId\n\t\t\t});\n\t\t}\n\n\t\tif( '' === id || id === window[className].$typeDropdown.attr('id')){\n\t\t\tlet create_contact \t= $('#create_contact').parents('div.checkbox').first().checkbox('is checked');\n\t\t\tlet create_lead \t= $('#create_lead').parents('div.checkbox').first().checkbox('is checked');\n\t\t\tlet create_unsorted\t= $('#create_unsorted').parents('div.checkbox').first().checkbox('is checked');\n\n\t\t\tlet type = window[className].$typeDropdown.parent().dropdown('get value');\n\t\t\tlet entityActionVariants = [];\n\t\t\tif(type === 'INCOMING_UNKNOWN' || type === 'MISSING_UNKNOWN'){\n\t\t\t\tentityActionVariants = [\n\t\t\t\t\t{name: globalTranslate['mod_amo_action_none'], \t\t   \tvalue: 'none', selected: (create_contact===false && create_lead===false && create_unsorted===false)},\n\t\t\t\t\t{name: globalTranslate['mod_amo_action_unsorted'],\t   \tvalue: 'unsorted', selected: (create_unsorted===true)},\n\t\t\t\t\t{name: globalTranslate['mod_amo_action_contact'], \t   \tvalue: 'contact', selected: (create_contact===true && create_lead===false && create_unsorted===false)},\n\t\t\t\t\t{name: globalTranslate['mod_amo_action_contact_lead'], \tvalue: 'contact_lead', selected: (create_contact===true && create_lead===true && create_unsorted===false)},\n\t\t\t\t];\n\t\t\t}else if(type === 'INCOMING_KNOWN' || type === 'MISSING_KNOWN' || type === 'OUTGOING_KNOWN_FAIL' || type === 'OUTGOING_KNOWN'){\n\t\t\t\tentityActionVariants = [\n\t\t\t\t\t{name: globalTranslate['mod_amo_action_none'], \t\t\tvalue: 'none', selected: (create_contact===false && create_lead===false && create_unsorted===false)},\n\t\t\t\t\t{name: globalTranslate['mod_amo_action_lead'], \t\t\tvalue: 'lead', selected: (create_contact===false && create_lead===true && create_unsorted===false)},\n\t\t\t\t];\n\t\t\t}else if(type === 'OUTGOING_UNKNOWN'){\n\t\t\t\tentityActionVariants = [\n\t\t\t\t\t{name: globalTranslate['mod_amo_action_none'], \t\t\tvalue: 'none', selected: (create_contact===false && create_lead===false && create_unsorted===false)},\n\t\t\t\t\t{name: globalTranslate['mod_amo_action_contact'], \t\tvalue: 'contact', selected: (create_contact===true && create_lead===false && create_unsorted===false)},\n\t\t\t\t\t{name: globalTranslate['mod_amo_action_contact_lead'], \tvalue: 'contact_lead', selected: (create_contact===true && create_lead===true && create_unsorted===false)},\n\t\t\t\t];\n\t\t\t}\n\t\t\twindow[className].$entityActionDropdown.find('option').remove();\n\t\t\t$.each(entityActionVariants, function (i, item) {\n\t\t\t\tlet options = {\n\t\t\t\t\tvalue: item.value,\n\t\t\t\t\ttext : item.name\n\t\t\t\t};\n\t\t\t\tif(item.selected){\n\t\t\t\t\toptions.selected = 'selected';\n\t\t\t\t}\n\t\t\t\twindow[className].$entityActionDropdown.append($('<option>', options));\n\t\t\t});\n\t\t\twindow[className].$entityActionDropdown.parent().dropdown({\n\t\t\t\tvalues: entityActionVariants,\n\t\t\t\tonChange: window[className].onChangeEntityAction\n\t\t\t});\n\n\t\t\tlet task_responsible_type = window[className].$task_responsible_type.parent().dropdown('get value');\n\t\t\tlet taskRespVariants = [];\n\t\t\tif(type === 'OUTGOING_KNOWN_FAIL' || type === 'OUTGOING_KNOWN') {\n\t\t\t\ttaskRespVariants = [\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_'], value: '', selected: task_responsible_type === ''},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_firstAnswerUser'], value: 'firstAnswerUser', selected: task_responsible_type === 'firstAnswerUser'},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_lastAnswerUser'], value: 'lastAnswerUser', selected: task_responsible_type === 'lastAnswerUser'},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_clientResponsible'], value: 'clientResponsible', selected: task_responsible_type === 'clientResponsible'},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_def_responsible'], \tvalue: 'def_responsible', selected: task_responsible_type === 'def_responsible'},\n\t\t\t\t];\n\n\t\t\t}else if (type === 'OUTGOING_UNKNOWN'){\n\t\t\t\ttaskRespVariants = [\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_'], value: '', selected: task_responsible_type === ''},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_def_responsible'], \tvalue: 'def_responsible', selected: task_responsible_type === 'def_responsible'},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_firstAnswerUser'], value: 'firstAnswerUser', selected: task_responsible_type === 'firstAnswerUser'},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_lastAnswerUser'], value: 'lastAnswerUser', selected: task_responsible_type === 'lastAnswerUser'},\n\t\t\t\t];\n\t\t\t}else if (type === 'MISSING_KNOWN'){\n\t\t\t\ttaskRespVariants = [\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_'], value: '', selected: task_responsible_type === ''},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_def_responsible'], \tvalue: 'def_responsible', selected: task_responsible_type === 'def_responsible'},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_clientResponsible'], value: 'clientResponsible', selected: task_responsible_type === 'clientResponsible'},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_firstMissedUser'], value: 'firstMissedUser', selected: task_responsible_type === 'firstAnswerUser'},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_lastMissedUser'], value: 'lastMissedUser', selected: task_responsible_type === 'lastAnswerUser'},\n\t\t\t\t];\n\t\t\t}else if (type === 'INCOMING_UNKNOWN'){\n\t\t\t\ttaskRespVariants = [\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_'], value: '', selected: task_responsible_type === ''},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_def_responsible'], \tvalue: 'def_responsible', selected: task_responsible_type === 'def_responsible'},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_firstAnswerUser'], value: 'firstAnswerUser', selected: task_responsible_type === 'firstAnswerUser'},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_lastAnswerUser'], value: 'lastAnswerUser', selected: task_responsible_type === 'lastAnswerUser'},\n\t\t\t\t];\n\t\t\t}else if (type === 'MISSING_UNKNOWN'){\n\t\t\t\ttaskRespVariants = [\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_'], value: '', selected: task_responsible_type === ''},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_def_responsible'], \tvalue: 'def_responsible', selected: task_responsible_type === 'def_responsible'},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_firstMissedUser'], value: 'firstMissedUser', selected: task_responsible_type === 'firstAnswerUser'},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_lastMissedUser'], value: 'lastMissedUser', selected: task_responsible_type === 'lastAnswerUser'},\n\t\t\t\t];\n\t\t\t}else if (type === 'INCOMING_KNOWN'){\n\t\t\t\ttaskRespVariants = [\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_'], value: '', selected: task_responsible_type === ''},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_firstAnswerUser'], value: 'firstAnswerUser', selected: task_responsible_type === 'firstAnswerUser'},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_lastAnswerUser'], value: 'lastAnswerUser', selected: task_responsible_type === 'lastAnswerUser'},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_clientResponsible'], value: 'clientResponsible', selected: task_responsible_type === 'clientResponsible'},\n\t\t\t\t\t{name: globalTranslate['mod_amo_task_responsible_type_def_responsible'], \tvalue: 'def_responsible', selected: task_responsible_type === 'def_responsible'},\n\t\t\t\t];\n\t\t\t}\n\t\t\twindow[className].$task_responsible_type.find('option').remove();\n\t\t\t$.each(taskRespVariants, function (i, item) {\n\t\t\t\tlet options = {\n\t\t\t\t\tvalue: item.value,\n\t\t\t\t\ttext : item.name\n\t\t\t\t};\n\t\t\t\tif(item.selected){\n\t\t\t\t\toptions.selected = 'selected';\n\t\t\t\t}\n\t\t\t\twindow[className].$task_responsible_type.append($('<option>', options));\n\t\t\t});\n\t\t\twindow[className].$task_responsible_type.parent().dropdown({\n\t\t\t\tvalues: taskRespVariants,\n\t\t\t\tonChange: window[className].onChangeEntityAction\n\t\t\t});\n\t\t}\n\t\twindow[className].setVisibilityElements();\n\t},\n\n\t/**\n\t *\n\t */\n\tonChangeSettings(){\n\t\twindow[className].setVisibilityElements();\n\t},\n\n\t/**\n\t * We can modify some data before form send\n\t * @param settings\n\t * @returns {*}\n\t */\n\tcbBeforeSendForm(settings) {\n\t\tconst result = settings;\n\t\tresult.data = window[className].$formObj.form('get values');\n\t\tdelete result.data.pipeLineStatuses;\n\t\treturn result;\n\t},\n\t/**\n\t * Some actions after forms send\n\t */\n\tcbAfterSendForm(response) {\n\t\tconsole.log(response);\n\t\tif(response.success === true && $('#id').val() === ''){\n\t\t\t$('#id').val(response.id);\n\t\t\tlet title = $('head title').html();\n\t\t\twindow.history.pushState({page: title}, title, `${window.location.href}${response.id}`);\n\t\t}\n\t},\n\n\t/**\n\t * Initialize form parameters\n\t */\n\tinitializeForm() {\n\t\tForm.$formObj = window[className].$formObj;\n\t\tForm.url = `${window.location.origin}${globalRootUrl}${idUrl}/saveEntitySettings`;\n\t\tForm.validateRules = window[className].validateRules;\n\t\tForm.cbBeforeSendForm = window[className].cbBeforeSendForm;\n\t\tForm.cbAfterSendForm = window[className].cbAfterSendForm;\n\t\tForm.initialize();\n\t},\n\n\tsetVisibilityElements(){\n\t\tlet create_contact  = $('#create_contact').parents('div.checkbox').checkbox('is checked');\n\t\tlet create_unsorted\t= $('#create_unsorted').parents('div.checkbox').first().checkbox('is checked');\n\t\tif(create_contact || create_unsorted){\n\t\t\t$('#template_contact_name').parents('div.field').first().show();\n\t\t}else{\n\t\t\t$('#template_contact_name').parents('div.field').first().hide();\n\t\t}\n\t\tlet create_lead \t= $('#create_lead').parents('div.checkbox').checkbox('is checked');\n\t\tif(create_lead || create_unsorted){\n\t\t\t$('#template_lead_name').parents('div.field').first().show();\n\t\t}else{\n\t\t\t$('#template_lead_name').parents('div.field').first().hide();\n\t\t}\n\t\tlet create_task\t\t= $('#create_task').parents('div.checkbox').checkbox('is checked');\n\t\tif(create_task){\n\t\t\t$('#template_task_text').parents('div.field').first().show();\n\t\t\t$('#deadline_task').parents('div.field').first().show();\n\t\t\twindow[className].$task_responsible_type.parents('div.field').first().show();\n\t\t}else{\n\t\t\t$('#template_task_text').parents('div.field').first().hide();\n\t\t\t$('#deadline_task').parents('div.field').first().hide();\n\t\t\twindow[className].$task_responsible_type.parents('div.field').first().hide();\n\t\t}\n\t}\n};\n\n$(document).ready(() => {\n\twindow[className].initialize();\n});\n\n"],"file":"module-amo-crm-modify-entity-settings.js"}